{"version":3,"sources":["helper.js","components/Login/Login.js","components/Main/Main.js","components/Dropdown/Dropdown.js","components/UserList/UserList.js","App.js","index.js"],"names":["homeURL","process","Login","history","useState","login","setLogin","password","setPassword","loginIsFailled","setloginIsFailled","handleChange","value","setFunc","matched_value","match","isActive","handleClick","e","preventDefault","axios","post","username","then","res","token","data","localStorage","setItem","push","err","setTimeout","notification","className","alert","type","name","placeholder","onChange","target","onClick","Main","useEffect","getItem","Dropdown","activeItem","items","setActive","dropdownItems","map","item","i","key","UserList","users","setUsers","loading","setLoading","sortTypes","sortType","setSort","filterValue","setFilterValue","console","log","get","headers","Authorization","user","index","usersToFilter","filter","userList","usersToSort","sort","a","b","defaul_index","id","sortUsers","first_name","last_name","App","path","exact","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.956e6f33.chunk.js","sourcesContent":["\r\nconst homeURL = process.env.PUBLIC_URL;\r\n\r\nexport {homeURL};","import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport './Login.css';\r\nimport {homeURL} from '../../helper';\r\n\r\nconst Login = ({history}) => {\r\n\r\n    const [login, setLogin] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [loginIsFailled, setloginIsFailled] = useState(false);\r\n\r\n    const submit = (e) => {\r\n      e.preventDefault();\r\n      axios.post('https://emphasoft-test-assignment.herokuapp.com/api-token-auth/',\r\n        { username:  `${login}`,\r\n          password: `${password}`, }\r\n      ).then(\r\n          res => {\r\n            let token = res.data.token;\r\n            localStorage.setItem('token', token);\r\n            history.push(homeURL + '/');\r\n          },\r\n          err => {\r\n            setloginIsFailled(true);\r\n            setTimeout(() => setloginIsFailled(false), 1000);\r\n          }\r\n      );\r\n      \r\n    };\r\n\r\n    const handleChange = (value, setFunc) => {\r\n        const matched_value = value.match(/\\S+/);\r\n        if(matched_value)\r\n            setFunc(`${matched_value}`);\r\n        else\r\n            setFunc(``);\r\n    };\r\n    \r\n    const isActive = (password && login) ?  ``: 'inactive';\r\n    const handleClick = (password && login) ? submit : (e) => e.preventDefault();\r\n    const notification = (password && login) ? null : <span className= \"notification\">  *Все поля необходимы для заполнения</span>;\r\n\r\n    const alert =  loginIsFailled ? (\r\n    <div className = 'modal-window'>\r\n        <div className = 'alert-message'>\r\n            <h3> Неверный логин или пароль! </h3>\r\n        </div>\r\n    </div> )\r\n    : null;\r\n\r\n    return (\r\n        <div className=\"form-container\">\r\n            {alert}\r\n            <form className=\"authorization-form\">\r\n                <label>\r\n                    <span><b>Логин:</b></span>\r\n                <input type=\"text\" name=\"login\"  placeholder=\"Введите логин\"\r\n                    value = {login}\r\n                    onChange={ e => handleChange(e.target.value, setLogin)} />\r\n                </label>\r\n                <label>\r\n                <span><b>Пароль:</b></span>\r\n                <input type=\"text\" name=\"password\"  placeholder=\"Введите пароль\"\r\n                    value = {password}\r\n                    onChange = {(e) => handleChange( e.target.value, setPassword)}/>\r\n                </label>\r\n                {notification}\r\n                <input className = {`btn ${isActive}`} type=\"submit\" value=\"Отправить\" onClick={handleClick} />\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport { Login }","import React, { useEffect} from 'react';\r\nimport './Main.css';\r\nimport {homeURL} from '../../helper';\r\n\r\nconst Main = ({history}) => {\r\n    useEffect(() =>{\r\n            const token = localStorage.getItem('token');\r\n            if(!token){\r\n                history.push(homeURL + '/Login');\r\n            }\r\n    }, [history]);\r\n\r\n    return(\r\n        <div className = 'page-container'>\r\n        <h1>\r\n            Авторизация проведена успешно!\r\n        </h1>\r\n        <button className='btn user-list-btn' onClick = {() => history.push(homeURL + '/User-list')}>\r\n            Отобразить список пользователей\r\n        </button>\r\n\r\n        </div>\r\n    );\r\n    \r\n};\r\nexport {Main};","import React from 'react';\r\nimport './Dropdown.css';\r\n\r\nconst Dropdown = ({activeItem, items, setActive}) => {\r\n    const dropdownItems = items.map((item, i) => \r\n        <li key = {i} onClick = {() => setActive(item)}> {item} </li>\r\n    );\r\n        return(\r\n            <div className=\"dropdown\">\r\n                <button className=\"btn dropbtn\">{activeItem}</button>\r\n                <ul className=\"dropdown-content\">\r\n                    {dropdownItems}\r\n                </ul>\r\n            </div>\r\n        );   \r\n};\r\n\r\nexport {Dropdown};\r\n\r\n","import React, { useState, useEffect} from 'react';\r\nimport './UserList.css';\r\nimport axios from 'axios';\r\nimport {Dropdown} from '../Dropdown/Dropdown';\r\nimport {homeURL} from '../../helper';\r\n\r\nconst UserList = ({history}) => {\r\n    const [users, setUsers] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const sortTypes = [\r\n        'По умолчанию',\r\n        'По возрастанию id',\r\n        'По убыванию id',\r\n    ];\r\n\r\n    const [sortType, setSort] = useState(sortTypes[0]);\r\n\r\n    const [filterValue, setFilterValue] = useState('');\r\n\r\n\r\n    const filterUsers = (usersToFilter, filter) => {\r\n        if(!filter){\r\n            console.log(`it's empty!`);\r\n            return usersToFilter;\r\n        }\r\n\r\n        return usersToFilter.filter(item => item.username.match(filter));\r\n    };\r\n\r\n    const sortUsers = (usersToSort, sort) => {\r\n        switch(sort){\r\n            case 'По умолчанию':\r\n                usersToSort.sort( (a,b) => a.defaul_index - b.defaul_index)\r\n                break;\r\n            case 'По возрастанию id':\r\n                usersToSort.sort( (a,b) => a.id - b.id)\r\n                break;\r\n            case 'По убыванию id':\r\n                usersToSort.sort( (a,b) => b.id - a.id)\r\n                break;\r\n            default:\r\n                break;\r\n        };\r\n        return usersToSort;\r\n    };\r\n\r\n    useEffect(() =>{\r\n            setLoading(true);\r\n            const token = localStorage.getItem('token');\r\n            console.log(token);\r\n            if(!token){\r\n                history.push(homeURL + '/Login');\r\n\r\n            }\r\n            else{\r\n                axios.get(`https://emphasoft-test-assignment.herokuapp.com/api/v1/users/`,\r\n                { headers: {\r\n                    Authorization:`Token ${token}`,\r\n                    } \r\n                }).then(res => {\r\n                    setUsers(res.data.map( (user,index) => {user['defaul_index'] = index; return user}));\r\n                    setLoading(false);\r\n                });\r\n            };\r\n\r\n    }, [history]);\r\n    \r\n    if(loading){\r\n        return(\r\n            <div className = 'page-container'>\r\n                <h3>Загрузка...</h3>\r\n            </div>\r\n        )\r\n    }\r\n    else{\r\n        let userList = users;\r\n        userList = sortUsers(users, sortType);\r\n        userList = filterUsers(users, filterValue);\r\n        userList = userList.map((user, index) =>\r\n        <tr key={index}>\r\n            <td> {user.id} </td>\r\n            <td> {user.username} </td>\r\n            <td> {user.first_name} </td>\r\n            <td> {user.last_name} </td>\r\n        </tr>);\r\n\r\n\r\n        return(\r\n           <div className = 'page-container'>\r\n                <div className = 'bar-container'>\r\n\r\n                        <span>Сортировать:</span>\r\n                        <Dropdown activeItem = {sortType} items = {sortTypes} setActive = {setSort} />\r\n\r\n                        <span>Фильтрация по логину:</span>\r\n                        <input type = 'text' value = {filterValue} onChange = {(e) => setFilterValue( e.target.value)}/>\r\n\r\n                </div>\r\n                <div className = 'table-container'>\r\n                    <table className=\"users-table\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>ID</th>\r\n                                <th>Логин</th>\r\n                                <th>Имя</th>\r\n                                <th>Фамилия</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {userList}  \r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div> \r\n        );\r\n    };\r\n    \r\n};\r\nexport {UserList};","import React from 'react';\nimport './App.css';\nimport {BrowserRouter, Route, Switch} from 'react-router-dom';\nimport {Login} from './components/Login/Login';\nimport {Main} from './components/Main/Main';\nimport {UserList} from './components/UserList/UserList';\nimport {homeURL} from './helper';\n\nconsole.log(homeURL);\nfunction App() {\n  \n  return (\n    <BrowserRouter>\n      <Switch>\n            <Route path= {homeURL + \"/\"} exact component = {Main} />\n            <Route path= {homeURL + \"/Login\"} exact component = {Login} />\n            <Route path= {homeURL + \"/User-list\"} exact component = {UserList} />\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}