{"version":3,"sources":["helper.js","components/Login/Login.js","components/Main/Main.js","components/Dropdown/Dropdown.js","components/UserList/UserList.js","components/PageNotFound/PageNotFound.js","App.js","index.js"],"names":["homeURL","process","Login","history","useEffect","token","localStorage","getItem","console","log","push","useState","login","setLogin","password","setPassword","loginIsFailled","setloginIsFailled","handleChange","value","setFunc","matched_value","match","isActive","handleClick","e","preventDefault","axios","post","username","then","res","data","setItem","err","setTimeout","notification","className","alert","type","name","placeholder","onChange","target","onClick","Main","Dropdown","activeItem","items","setActive","dropdownItems","map","item","i","key","UserList","users","setUsers","loading","setLoading","sortTypes","sortType","setSort","filterValue","setFilterValue","get","headers","Authorization","user","index","usersToFilter","filter","userList","usersToSort","sort","a","b","defaul_index","id","sortUsers","first_name","last_name","PageNotFound","App","exact","path","component","to","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5048340c.chunk.js","sourcesContent":["\r\nconst homeURL = process.env.PUBLIC_URL;\r\n\r\nexport {homeURL};","import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './Login.css';\r\nimport {homeURL} from '../../helper';\r\n\r\nconst Login = ({history}) => {\r\n    useEffect(() =>{\r\n        const token = localStorage.getItem('token');\r\n        console.log(`refresh`);\r\n        if(token){\r\n            history.push(homeURL + '/');\r\n        }\r\n    }, [history]);\r\n    \r\n    const [login, setLogin] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [loginIsFailled, setloginIsFailled] = useState(false);\r\n\r\n    const submit = (e) => {\r\n      e.preventDefault();\r\n      axios.post('https://emphasoft-test-assignment.herokuapp.com/api-token-auth/',\r\n        { username:  `${login}`,\r\n          password: `${password}`, }\r\n      ).then(\r\n          res => {\r\n            let token = res.data.token;\r\n            localStorage.setItem('token', token);\r\n            history.push(homeURL + '/');\r\n          },\r\n          err => {\r\n            setloginIsFailled(true);\r\n            setTimeout(() => setloginIsFailled(false), 1000);\r\n          }\r\n      );\r\n    };\r\n\r\n    \r\n\r\n    const handleChange = (value, setFunc) => {\r\n        const matched_value = value.match(/\\S+/);\r\n        if(matched_value)\r\n            setFunc(`${matched_value}`);\r\n        else\r\n            setFunc(``);\r\n    };\r\n    \r\n    const isActive = (password && login) ?  ``: 'inactive';\r\n    const handleClick = (password && login) ? submit : (e) => e.preventDefault();\r\n    const notification = (password && login) ? null : <span className= \"notification\">  *Все поля необходимы для заполнения</span>;\r\n\r\n    const alert =  loginIsFailled ? (\r\n    <div className = 'modal-window'>\r\n        <div className = 'alert-message'>\r\n            <h3> Неверный логин или пароль! </h3>\r\n        </div>\r\n    </div> )\r\n    : null;\r\n\r\n    return (\r\n        <div className=\"form-container\">\r\n            {alert}\r\n            <form className=\"authorization-form\">\r\n                <label>\r\n                    <span><b>Логин:</b></span>\r\n                <input type=\"text\" name=\"login\"  placeholder=\"Введите логин\"\r\n                    value = {login}\r\n                    onChange={ e => handleChange(e.target.value, setLogin)} />\r\n                </label>\r\n                <label>\r\n                <span><b>Пароль:</b></span>\r\n                <input type=\"text\" name=\"password\"  placeholder=\"Введите пароль\"\r\n                    value = {password}\r\n                    onChange = {(e) => handleChange( e.target.value, setPassword)}/>\r\n                </label>\r\n                {notification}\r\n                <input className = {`btn ${isActive}`} type=\"submit\" value=\"Отправить\" onClick={handleClick} />\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport { Login }","import React, { useEffect} from 'react';\r\nimport './Main.css';\r\nimport {homeURL} from '../../helper';\r\n\r\nconst Main = ({history}) => {\r\n    useEffect(() =>{\r\n            const token = localStorage.getItem('token');\r\n            if(!token){\r\n                history.push(homeURL + '/Login');\r\n            }\r\n    }, [history]);\r\n\r\n    return(\r\n        <div className = 'page-container'>\r\n        <h1>\r\n            Авторизация проведена успешно!\r\n        </h1>\r\n        <button className='btn user-list-btn' onClick = {() => history.push(homeURL + '/User-list')}>\r\n            Отобразить список пользователей\r\n        </button>\r\n\r\n        </div>\r\n    );\r\n    \r\n};\r\nexport {Main};","import React from 'react';\r\nimport './Dropdown.css';\r\n\r\nconst Dropdown = ({activeItem, items, setActive}) => {\r\n    const dropdownItems = items.map((item, i) => \r\n        <li key = {i} onClick = {() => setActive(item)}> {item} </li>\r\n    );\r\n        return(\r\n            <div className=\"dropdown\">\r\n                <button className=\"btn dropbtn\">{activeItem}</button>\r\n                <ul className=\"dropdown-content\">\r\n                    {dropdownItems}\r\n                </ul>\r\n            </div>\r\n        );   \r\n};\r\n\r\nexport {Dropdown};\r\n\r\n","import React, { useState, useEffect} from 'react';\r\nimport './UserList.css';\r\nimport axios from 'axios';\r\nimport {Dropdown} from '../Dropdown/Dropdown';\r\nimport {homeURL} from '../../helper';\r\n\r\nconst UserList = ({history}) => {\r\n    const [users, setUsers] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const sortTypes = [\r\n        'По умолчанию',\r\n        'По возрастанию id',\r\n        'По убыванию id',\r\n    ];\r\n\r\n    const [sortType, setSort] = useState(sortTypes[0]);\r\n\r\n    const [filterValue, setFilterValue] = useState('');\r\n\r\n\r\n    const filterUsers = (usersToFilter, filter) => {\r\n        if(!filter){\r\n            return usersToFilter;\r\n        }\r\n\r\n        return usersToFilter.filter(item => item.username.match(filter));\r\n    };\r\n\r\n    const sortUsers = (usersToSort, sort) => {\r\n        switch(sort){\r\n            case 'По умолчанию':\r\n                usersToSort.sort( (a,b) => a.defaul_index - b.defaul_index)\r\n                break;\r\n            case 'По возрастанию id':\r\n                usersToSort.sort( (a,b) => a.id - b.id)\r\n                break;\r\n            case 'По убыванию id':\r\n                usersToSort.sort( (a,b) => b.id - a.id)\r\n                break;\r\n            default:\r\n                break;\r\n        };\r\n        return usersToSort;\r\n    };\r\n\r\n    useEffect(() =>{\r\n            setLoading(true);\r\n            const token = localStorage.getItem('token');\r\n            if(!token){\r\n                history.push(homeURL + '/Login');\r\n            }\r\n            else{\r\n                axios.get(`https://emphasoft-test-assignment.herokuapp.com/api/v1/users/`,\r\n                { headers: {\r\n                    Authorization:`Token ${token}`,\r\n                    } \r\n                }).then(res => {\r\n                    setUsers(res.data.map( (user,index) => {user['defaul_index'] = index; return user}));\r\n                    setLoading(false);\r\n                });\r\n            };\r\n\r\n    }, [history]);\r\n    \r\n    if(loading){\r\n        return(\r\n            <div className = 'page-container'>\r\n                <h3>Загрузка...</h3>\r\n            </div>\r\n        )\r\n    }\r\n    else{\r\n        let userList = users;\r\n        userList = sortUsers(users, sortType);\r\n        userList = filterUsers(users, filterValue);\r\n        userList = userList.map((user, index) =>\r\n        <tr key={index}>\r\n            <td> {user.id} </td>\r\n            <td> {user.username} </td>\r\n            <td> {user.first_name} </td>\r\n            <td> {user.last_name} </td>\r\n        </tr>);\r\n\r\n\r\n        return(\r\n           <div className = 'page-container'>\r\n                <div className = 'bar-container'>\r\n\r\n                        <span>Сортировать:</span>\r\n                        <Dropdown activeItem = {sortType} items = {sortTypes} setActive = {setSort} />\r\n\r\n                        <span>Фильтрация по логину:</span>\r\n                        <input type = 'text' value = {filterValue} onChange = {(e) => setFilterValue( e.target.value)}/>\r\n\r\n                </div>\r\n                <div className = 'table-container'>\r\n                    <table className=\"users-table\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>ID</th>\r\n                                <th>Логин</th>\r\n                                <th>Имя</th>\r\n                                <th>Фамилия</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {userList}  \r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div> \r\n        );\r\n    };\r\n    \r\n};\r\nexport {UserList};","import React from 'react';\r\nimport './PageNotFound.css';\r\n\r\nconst PageNotFound = ({history}) => {\r\n\r\n    return(\r\n        <div className = 'page-container page-404'>\r\n            <div className = 'page-404'>\r\n                <h1>Ошибка 404</h1>\r\n                <h3> Страница не найдена!</h3>\r\n            </div>\r\n        </div>\r\n    );\r\n    \r\n};\r\nexport {PageNotFound};","import React from 'react';\nimport './App.css';\nimport {BrowserRouter, Route, Switch, Redirect} from 'react-router-dom';\nimport {Login} from './components/Login/Login';\nimport {Main} from './components/Main/Main';\nimport {UserList} from './components/UserList/UserList';\nimport {PageNotFound} from './components/PageNotFound/PageNotFound.js';\nimport {homeURL} from './helper';\n\nfunction App() {\n  \n  return (\n    <BrowserRouter>\n      <Switch>\n            <Route exact path =  {homeURL + \"/\"} component = {Main} />\n            <Route exact path = {homeURL + \"/Login\"} component = {Login} />\n            <Route exact path = {homeURL + \"/User-list\"} component = {UserList} />\n            <Route exact path = {homeURL + \"/404\"} component = {PageNotFound} />\n            <Redirect to = {homeURL + \"/404\"} />\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}